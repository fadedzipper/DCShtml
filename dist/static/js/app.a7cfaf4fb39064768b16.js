webpackJsonp([1],{"/ZCT":function(e,t){},"1aV4":function(e,t){},"2XnG":function(e,t){},"3vgS":function(e,t){},"4VEF":function(e,t){},"4afw":function(e,t){},"Dku/":function(e,t){},M93x:function(e,t,a){"use strict";var l=a("sEFh"),n=a.n(l),i=a("oYUS");var o=function(e){a("z/YE")},r=a("C7Lr")(n.a,i.a,!1,o,null,null);t.default=r.exports},Mg9S:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("kV13"),n=a("M93x"),i=a("bQIR"),o=a.n(i),r=(a("gFLX"),a("wUgx")),s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("h1",[e._v(e._s(e.msg))]),e._v(" "),a("h2",[e._v("Essential Links")]),e._v(" "),e._m(0),e._v(" "),a("h2",[e._v("Ecosystem")]),e._v(" "),e._m(1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[e._v("\n        Core Docs\n      ")])]),e._v(" "),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[e._v("\n        Forum\n      ")])]),e._v(" "),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[e._v("\n        Community Chat\n      ")])]),e._v(" "),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[e._v("\n        Twitter\n      ")])]),e._v(" "),a("br"),e._v(" "),a("li",[a("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[e._v("\n        Docs for This Template\n      ")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};a("C7Lr")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},s,!1,function(e){a("2XnG")},"data-v-d8ec41bc",null).exports;var c={data:function(){return{is_super:-1}},created:function(){this.GetUserAuth()},methods:{GetUserAuth:function(){this.is_super=JSON.parse(localStorage.getItem("is_super")),this.permission=JSON.parse(localStorage.getItem("permiss"))},handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)},logout:function(){var e=this;this.$confirm("确认退出吗?","提示",{}).then(function(){sessionStorage.removeItem("user"),e.$router.push("/login")}).catch(function(){})}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"Home"}},[e._m(0),e._v(" "),a("div",{staticClass:"containter"},[a("div",{staticClass:"left"},[a("div",{staticClass:"leftnav"},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2","background-color":"#02b6fd","text-color":"#fff","active-text-color":"#1aa094",router:!0},on:{open:e.handleOpen,close:e.handleClose}},[a("el-menu-item",{attrs:{index:"/home/first"}},[a("i",{staticClass:"iconfont icon-xiangmushouye"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("项目首页")])]),e._v(" "),e.is_super?a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"iconfont icon-shebeiguanli"}),e._v(" "),a("span",[e._v("设备管理")])]),e._v(" "),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/home/devicerelate"}},[e._v("设备参数管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"/home/realdate"}},[e._v("设备实时数据")]),e._v(" "),a("el-menu-item",{attrs:{index:"/home/device"}},[e._v("设备管理")])],1)],2):e._e(),e._v(" "),e.is_super?a("el-menu-item",{attrs:{index:"/home/UserManager"}},[a("i",{staticClass:"iconfont icon-yonghuguanli"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("用户管理")])]):e._e(),e._v(" "),e.is_super?a("el-menu-item",{attrs:{index:"/home/report"}},[a("i",{staticClass:"iconfont icon-chakantiezigengduojubao"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("举报管理")])]):e._e(),e._v(" "),a("el-menu-item",{attrs:{index:"/home/detect"}},[a("i",{staticClass:"iconfont icon-shishijiance"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("实时监测")])]),e._v(" "),e.is_super?a("el-menu-item",{attrs:{index:"/home/grid"}},[a("i",{staticClass:"iconfont icon-plus-gridview"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("网格管理")])]):e._e(),e._v(" "),e.is_super?a("el-menu-item",{attrs:{index:"/home/alarm"}},[a("i",{staticClass:"iconfont icon-baojing"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("报警管理")])]):e._e(),e._v(" "),e.is_super?a("el-menu-item",{attrs:{index:"/home/log"}},[a("i",{staticClass:"iconfont icon-caozuorizhi32"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("操作日志")])]):e._e(),e._v(" "),e.is_super?a("el-menu-item",{attrs:{index:"/login1"}},[a("i",{staticClass:"iconfont icon-tuichudenglu"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("退出登录")])]):e._e()],1)],1)]),e._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"center"},[a("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[a("router-view")],1)],1),e._v(" "),a("div",{staticClass:"footer"},[e._v("\n        版权所有：第二小组  @2020-07-06\n      ")])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"title"},[this._v("Air Protector云平台")])])}]};var m=a("C7Lr")(c,u,!1,function(e){a("ftlU")},null,null).exports;function d(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}var f=a("I29D"),p=a.n(f);p.a.defaults.baseURL="http://39.97.221.236:8000",p.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var h=p.a,v={data:function(){var e=this;return{users:[],dialogFormVisible:!1,title:"新增用户",formLabelWidth:"100px",form:{name:"",num:"",username:"",email:"",phone:"",gender:-1,info:"",is_active:-1,password:""},rules:{name:[{required:!0,message:"请输入用户姓名",trigger:"blur"},{min:1,max:30,message:"长度在 1 到 30个字符",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:1,max:30,message:"长度在 1 到 30个字符",trigger:"blur"}],repass:[{validator:function(t,a,l){""===a?l(new Error("请再次输入密码")):a!==e.form.password?l(new Error("两次输入密码不一致!")):l()},trigger:"blur"}],password:[{required:!0,message:"请输入用户密码",trigger:"blur"},{min:6,message:"最少6个字符",trigger:"blur"}],num:[{required:!0,message:"工号不能为空"},{type:"number",message:"工号必须为数字值"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]},total:void 0,pageSize:5,currentPage:1,id:"",idDis:!1,listLoading:!1,sels:[],search:"",gender:"",is_active:""}},watch:{search:function(){this.GetAllData(),console.log(this.search)}},created:function(){this.GetAllData()},methods:{filterTag:function(e,t){return t.is_active===e},handleCurrentChange:function(e){this.GetAllData()},GetAllData:function(){var e=this;h.get("/users/",{params:{page_size:this.pageSize,page:this.currentPage,gender:this.gender,is_active:this.is_active,filters:this.filters,search:this.search}}).then(function(t){console.log(t),e.users=t.data.data.results,e.total=t.data.data.count,e.users=t.data.data.results.map(function(e){return e.is_active="1"==e.is_active?"可用":"禁用",e}),console.log("表格数据:",e.users)}).catch(function(t){e.$notify.error({title:"失败",message:"获取数据失败"})})},AddStudent:function(){this.title="新增用户",this.dialogFormVisible=!0,this.form={},this.idDis=!1},BtnOk:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if("新增用户"==t.title&&h.post("/users/",t.form).then(function(e){console.log("如果成功:",e),t.GetAllData()}).catch(function(e){t.$notify.error({title:"失败",message:"新增失败"}),console.log(e)}),"编辑学生"==t.title)for(var a=0;a<t.users.length;a++)t.id==t.users[a].id&&(t.form.date=d(t.form.date),t.users.splice(a,1,t.form),h.put("/users/"+t.id+"/",t.form).then(function(e){console.log("如果成功:",e),t.GetAllData()}).catch(function(e){t.$notify.error({title:"失败",message:"编辑失败"}),console.log(e)}));t.dialogFormVisible=!1}else console.log("失败")})},EditorStudent:function(e){this.title="编辑学生",this.dialogFormVisible=!0,this.form=e,this.id=e.id,this.idDis=!0},formatSex:function(e,t){return 1==e.gender?"男":0==e.gender?"女":"未知"},handleDel:function(e,t){var a=this;this.$confirm("此操作将永久冻结该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){h.delete("/users/"+t.id+"/").then(function(e){a.$notify.success({title:"成功",message:"冻结成功"}),a.GetAllData()}).catch(function(e){a.$notify.success({title:"失败",message:"冻结失败"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},selsChange:function(e){this.sels=e},batchRemove:function(){var e=this;this.sels.map(function(e){return e.id}).toString();this.$confirm("确认冻结选中记录吗？","提示",{type:"warning"}).then(function(){h.delete("/users/"+row.ids+"/").then(function(t){e.$notify.success({title:"成功",message:"冻结成功"}),e.GetAllData()}).catch(function(t){e.$notify.success({title:"失败",message:"冻结失败"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},mounted:function(){this.GetAllData()}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.AddStudent}},[e._v("新增")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.users,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",type:"index",label:"id",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户名",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"gender",label:"性别",width:"100",formatter:e.formatSex,sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"num",label:"工号",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱","min-width":"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"电话",width:"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"date_joined",label:"加入时间","min-width":"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"is_active",label:"用户状态",width:"150",filters:[{text:"可用",value:"可用"},{text:"禁用",value:"禁用"}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"禁用"===t.row.is_active?"danger":"success","disable-transitions":""}},[e._v(e._s(t.row.is_active))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.EditorStudent(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.handleDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:e.batchRemove}},[e._v("批量删除")])],1),e._v(" "),a("div",{staticClass:"page",staticStyle:{position:"absolute",bottom:"40px",right:"20px"}},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"姓名",prop:"name","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"username","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别","label-width":e.formLabelWidth,prop:"class"}},[a("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[a("el-option",{attrs:{label:"男",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"女",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"再输入密码",prop:"repass","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.form.repass,callback:function(t){e.$set(e.form,"repass",t)},expression:"form.repass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"工号",prop:"num","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.num,callback:function(t){e.$set(e.form,"num",e._n(t))},expression:"form.num"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式",prop:"phone","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系邮箱",prop:"email","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"账户状态","label-width":e.formLabelWidth,prop:"class"}},[a("el-select",{attrs:{placeholder:"请选择账户状态"},model:{value:e.form.is_active,callback:function(t){e.$set(e.form,"is_active",t)},expression:"form.is_active"}},[a("el-option",{attrs:{label:"可用",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"用户信息",prop:"info","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:e.form.info,callback:function(t){e.$set(e.form,"info",t)},expression:"form.info"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.BtnOk("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var b=a("C7Lr")(v,g,!1,function(e){a("4VEF")},"data-v-72b76c23",null).exports,_=a("zMdo"),w={data:function(){return{}},mounted:function(){this.drawEchart1(),this.drawEchart2()},methods:{drawEchart1:function(){var e=_.init(document.getElementById("echart1"));e.setOption({title:{text:"温度检测图"},tooltip:{},xAxis:{data:["周一","周二","周三","周四","周五"]},yAxis:{},series:[{name:"销量",type:"bar",data:[5,20,36,10,10]}]}),window.addEventListener("resize",function(){e.resize()})},drawEchart2:function(){var e=_.init(document.getElementById("echart2"));e.setOption({title:{text:"这是第二个图表"},xAxis:{type:"category",boundaryGap:!1,data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{data:[820,932,901,934,1290,1330,1320],type:"line",areaStyle:{}}]}),window.addEventListener("resize",function(){e.resize()})},drawEchart3:function(){},drawEchart4:function(){}}},y={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"Index"}},[t("div",{attrs:{id:"echart1"}}),this._v(" "),t("div",{attrs:{id:"echart2"}}),this._v(" "),t("div",{attrs:{id:"echart3"}}),this._v(" "),t("div",{attrs:{id:"echart4"}})])}]};var x=a("C7Lr")(w,y,!1,function(e){a("Mg9S")},"data-v-34b01abe",null).exports,C={data:function(){return{devices:[],dialogFormVisible:!1,title:"新增设备",formLabelWidth:"100px",form:{mac:"",serial:"",dev_passwd:"",name:"",is_enable:-1,is_online:-1,is_register:-1,is_bind:-1,x_index:"",y_index:"",info:"",grid:0},rules:{name:[{required:!0,message:"请输入设备名",trigger:"blur"},{min:1,max:30,message:"长度在 1 到 30个字符",trigger:"blur"}],dev_passwd:[{required:!0,message:"请输入设备密码",trigger:"blur"}],serial:[{required:!0,message:"请输入设备序列号",trigger:"blur"}],mac:[{required:!0,message:"请输入设备mac地址",trigger:"blur"}]},total:void 0,pageSize:5,currentPage:1,id:"",idDis:!1,listLoading:!1,sels:[],search:"",is_enable:"",is_online:"",is_register:"",is_bind:""}},watch:{search:function(){this.GetAllData(),console.log(this.search)}},created:function(){this.GetAllData()},methods:{filterTag1:function(e,t){return t.is_register===e},filterTag2:function(e,t){return t.is_online===e},filterTag3:function(e,t){return t.is_bind===e},filterTag4:function(e,t){return t.is_enable===e},handleCurrentChange:function(e){this.GetAllData()},GetAllData:function(){var e=this;h.get("/devices/list",{params:{page_size:this.pageSize,page:this.currentPage,is_enable:this.is_enable,is_register:this.is_register,is_bind:this.is_bind,is_online:this.is_online,search:this.search}}).then(function(t){console.log(t),e.devices=t.data.data.results,e.total=t.data.data.count,e.devices=t.data.data.results.map(function(e){return e.is_enable="1"==e.is_enable?"可用":"不可用",e.is_bind="1"==e.is_bind?"已绑定":"未绑定",e.is_register="1"==e.is_register?"已激活":"未激活",e.is_online="1"==e.is_online?"在线":"掉线",e}),console.log("表格数据:",e.devices)}).catch(function(t){e.$notify.error({title:"失败",message:"获取数据失败"})})},AddDevice:function(){this.title="新增设备",this.dialogFormVisible=!0,this.form={},this.idDis=!1},BtnOk:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if("新增设备"==t.title&&h.post("/devices/",t.form).then(function(e){console.log("如果成功:",e),t.GetAllData()}).catch(function(e){t.$notify.error({title:"失败",message:"新增失败"}),console.log(e)}),"编辑设备"==t.title)for(var a=0;a<t.devices.length;a++)t.id==t.devices[a].id&&(t.form.date=d(t.form.date),t.devices.splice(a,1,t.form),h.put("/devices/"+t.id+"/update",t.form).then(function(e){console.log("如果成功:",e),t.GetAllData()}).catch(function(e){t.$notify.error({title:"失败",message:"编辑失败"}),console.log(e)}));t.dialogFormVisible=!1}else console.log("失败")})},EditorStudent:function(e){this.title="编辑设备",this.dialogFormVisible=!0,this.form=e,this.id=e.id,this.idDis=!0},handleDel:function(e,t){var a=this;this.$confirm("此操作将永久冻结该设备, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){h.delete("/devices/"+t.id+"/").then(function(e){a.$notify.success({title:"成功",message:"冻结成功"}),a.GetAllData()}).catch(function(e){a.$notify.success({title:"失败",message:"冻结失败"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},handleEdit:function(e){this.title="编辑用户",this.editFormVisible=!0,this.form=e,this.id=e.id,this.idDis=!0},selsChange:function(e){this.sels=e},batchRemove:function(){var e=this;this.sels.map(function(e){return e.id}).toString();this.$confirm("确认冻结选中记录吗？","提示",{type:"warning"}).then(function(){h.delete("/users/"+row.ids+"/").then(function(t){e.$notify.success({title:"成功",message:"冻结成功"}),e.GetAllData()}).catch(function(t){e.$notify.success({title:"失败",message:"冻结失败"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},mounted:function(){this.GetAllData()}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.AddDevice}},[e._v("激活设备")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.devices}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"设备序列号"}},[a("span",[e._v(e._s(t.row.serial))])]),e._v(" "),a("el-form-item",{attrs:{label:"mac地址"}},[a("span",[e._v(e._s(t.row.mac))])]),e._v(" "),a("el-form-item",{attrs:{label:"经度"}},[a("span",[e._v(e._s(t.row.x_index))])]),e._v(" "),a("el-form-item",{attrs:{label:"纬度"}},[a("span",[e._v(e._s(t.row.y_index))])]),e._v(" "),a("el-form-item",{attrs:{label:"所属网格"}},[a("span",[e._v(e._s(t.row.grid))])]),e._v(" "),a("el-form-item",{attrs:{label:"设备描述"}},[a("span",[e._v(e._s(t.row.info))])]),e._v(" "),a("el-form-item",{attrs:{label:"注册时间"}},[a("span",[e._v(e._s(t.row.register_time))])]),e._v(" "),a("el-form-item",{attrs:{label:"激活时间"}},[a("span",[e._v(e._s(t.row.active_time))])]),e._v(" "),a("el-form-item",{attrs:{label:"最后登录时间"}},[a("span",[e._v(e._s(t.row.last_login_time))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"ID",prop:"id"}}),e._v(" "),a("el-table-column",{attrs:{label:"设备ID",prop:"serial"}}),e._v(" "),a("el-table-column",{attrs:{label:"设备名称",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{prop:"is_register",label:"激活状态",width:"150",filters:[{text:"已激活",value:"已激活"},{text:"未激活",value:"未激活"}],"filter-method":e.filterTag1,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"未激活"===t.row.is_register?"danger":"success","disable-transitions":""}},[e._v(e._s(t.row.is_register))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"is_online",label:"在线状态",width:"150",filters:[{text:"在线",value:"在线"},{text:"掉线",value:"掉线"}],"filter-method":e.filterTag2,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"掉线"===t.row.is_online?"danger":"success","disable-transitions":""}},[e._v(e._s(t.row.is_online))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"is_bind",label:"绑定状态",width:"150",filters:[{text:"已绑定",value:"已绑定"},{text:"未绑定",value:"未绑定"}],"filter-method":e.filterTag3,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"未绑定"===t.row.is_bind?"danger":"success","disable-transitions":""}},[e._v(e._s(t.row.is_bind))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"is_enable",label:"可用状态",width:"150",filters:[{text:"可用",value:"可用"},{text:"不可用",value:"不可用"}],"filter-method":e.filterTag4,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"不可用"===t.row.is_enable?"danger":"success","disable-transitions":""}},[e._v(e._s(t.row.is_enable))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.EditorStudent(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"page",staticStyle:{position:"absolute",bottom:"40px",right:"20px"}},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"mac地址",prop:"mac","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.mac,callback:function(t){e.$set(e.form,"mac",t)},expression:"form.mac"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"序列号",prop:"serial","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.serial,callback:function(t){e.$set(e.form,"serial",t)},expression:"form.serial"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备密码",prop:"dev_passwd","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.dev_passwd,callback:function(t){e.$set(e.form,"dev_passwd",t)},expression:"form.dev_passwd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备名称",prop:"name","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备冻结状态","label-width":e.formLabelWidth,prop:"is_enable"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.form.is_enable,callback:function(t){e.$set(e.form,"is_enable",t)},expression:"form.is_enable"}},[a("el-option",{attrs:{label:"未冻结",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"已冻结",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"设备在线状态","label-width":e.formLabelWidth,prop:"is_online"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.form.is_online,callback:function(t){e.$set(e.form,"is_online",t)},expression:"form.is_online"}},[a("el-option",{attrs:{label:"在线",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"掉线",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"设备激活状态","label-width":e.formLabelWidth,prop:"is_register"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.form.is_register,callback:function(t){e.$set(e.form,"is_register",t)},expression:"form.is_register"}},[a("el-option",{attrs:{label:"已激活",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"未激活",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"设备绑定状态","label-width":e.formLabelWidth,prop:"is_bind"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.form.is_bind,callback:function(t){e.$set(e.form,"is_bind",t)},expression:"form.is_bind"}},[a("el-option",{attrs:{label:"已激活",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"未激活",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"经度",prop:"x_index","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.x_index,callback:function(t){e.$set(e.form,"x_index",t)},expression:"form.x_index"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"纬度",prop:"y_index","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.y_index,callback:function(t){e.$set(e.form,"y_index",t)},expression:"form.y_index"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备描述",prop:"info","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:e.form.info,callback:function(t){e.$set(e.form,"info",t)},expression:"form.info"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属网格",prop:"grid","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.grid,callback:function(t){e.$set(e.form,"grid",t)},expression:"form.grid"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.BtnOk("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var S=a("C7Lr")(C,k,!1,function(e){a("Dku/")},"data-v-1749c041",null).exports,$=a("zMdo"),L=a.n($),D={name:"zmd",data:function(){return{data1:[],dialogFormVisible:!1,title:"我要举报",formLabelWidth:"100px",idDis:!1,form:{name:"",topic:"",phone:"",email:"",handled:-1,info:""},rules:{email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:1,max:30,message:"长度在 1 到 30个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入电话号码",trigger:"blur"}],topic:[{required:!0,message:"请输入举报原因",trigger:"blur"},{min:1,max:200,message:"长度在 1 到 200个字符",trigger:"blur"}]},chartLine:null,imagebox:[{id:0,idView:a("Vmam")},{id:1,idView:a("WKqE")},{id:2,idView:a("yqdz")}],zmdHeight:700,screenWidth:0}},methods:{AddReport:function(){this.title="我要举报",this.dialogFormVisible=!0,this.form={},this.idDis=!1},BtnOk:function(e){var t=this;this.$refs[e].validate(function(e){e?("我要举报"==t.title&&h.post("/reports/",t.form).then(function(e){console.log("如果成功:",e)}).catch(function(e){t.$notify.error({title:"失败",message:"新增失败"}),console.log(e)}),t.dialogFormVisible=!1):console.log("失败")})},drawLineChart:function(){var e=this;this.chartLine=L.a.init(document.getElementById("chartLine"));h.get("/devices/10HistoryCO2",{params:{}}).then(function(t){console.log(t),e.dataa=t.data.data,console.log("图表数据:",e.dataa)}).catch(function(t){e.$notify.error({title:"失败",message:"获取数据失败"})}),h.get("/devices/10HistoryPM10",{params:{}}).then(function(t){console.log(t),e.datab=t.data.data,console.log("图表数据:",e.datab)}).catch(function(t){e.$notify.error({title:"失败",message:"获取数据失败"})}),h.get("/devices/10HistoryPM25",{params:{}}).then(function(t){console.log(t),e.datac=t.data.data,console.log("图表数据:",e.datac)}).catch(function(t){e.$notify.error({title:"失败",message:"获取数据失败"})}),h.get("/devices/10HistoryTemp",{params:{}}).then(function(t){console.log(t),e.datad=t.data.data,console.log("图表数据:",e.datad)}).catch(function(t){e.$notify.error({title:"失败",message:"获取数据失败"})}),this.chartLine.setOption({title:{text:"Air Protector实时数据指标"},tooltip:{trigger:"axis"},legend:{data:["CO2","PM10","PM2.5","温度"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:["前十分钟","前九分钟","前八分钟","前七分钟","前六分钟","前五分钟","前四分钟","前三分钟","前两分钟","前一分钟"]},yAxis:{type:"value"},series:[{name:"CO2",type:"line",stack:"总量",data:this.dataa},{name:"PM10",type:"line",stack:"总量",data:this.datab},{name:"PM2.5",type:"line",stack:"总量",data:this.datac},{name:"温度",type:"line",stack:"总量",data:this.datac}]})},drawCharts:function(){this.drawLineChart()},setSize:function(){this.bannerHeight=400/1920*this.screenWidth}},mounted:function(){var e=this;this.screenWidth=window.innerWidth,this.setSize(),window.onresize=function(){e.screenWidth=window.innerWidth,e.setSize(),e.drawCharts()}},updated:function(){this.drawCharts()}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-carousel",{attrs:{interval:4e3,type:"card",height:"zmdHeight + 'px'"}},e._l(e.imagebox,function(t){return a("el-carousel-item",{key:t.id},[a("img",{staticClass:"image",attrs:{src:t.idView},on:{click:e.AddReport}})])}),1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticStyle:{width:"100%",height:"300px"},attrs:{id:"chartLine"}})])],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"姓名",prop:"name","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"举报原因",prop:"topic","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.topic,callback:function(t){e.$set(e.form,"topic",t)},expression:"form.topic"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话号码",prop:"phone","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"处理状态","label-width":e.formLabelWidth,prop:"handled"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.form.handled,callback:function(t){e.$set(e.form,"handled",t)},expression:"form.handled"}},[a("el-option",{attrs:{label:"已处理",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"未处理",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"其余说明",prop:"info","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:e.form.info,callback:function(t){e.$set(e.form,"info",t)},expression:"form.info"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.BtnOk("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var P=a("C7Lr")(D,A,!1,function(e){a("1aV4")},null,null).exports,O={data:function(){return{report:[],total:void 0,pageSize:5,currentPage:1,id:"",listLoading:!1,sels:[],search:"",handled:""}},watch:{search:function(){this.GetAllData(),console.log(this.search)}},created:function(){this.GetAllData()},methods:{filterTag:function(e,t){return t.handled===e},handleCurrentChange:function(e){this.GetAllData()},GetAllData:function(){var e=this;h.get("/reports/",{params:{page_size:this.pageSize,page:this.currentPage,handled:this.handled,search:this.search}}).then(function(t){console.log(t),e.report=t.data.data.results,e.total=t.data.data.count,e.report=t.data.data.results.map(function(e){return e.handled="1"==e.handled?"已处理":"未处理",e}),console.log("表格数据:",e.report)}).catch(function(t){e.$notify.error({title:"失败",message:"获取数据失败"})})},handleDelete:function(e,t){var a=this;this.$confirm("此操作将解除举报, 确认此举报信息已经处理?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){h.delete("/reports/"+t.id+"/").then(function(e){a.$notify.success({title:"成功",message:"解除成功"}),a.GetAllData()}).catch(function(e){a.$notify.success({title:"失败",message:"解除失败"})})}).catch(function(){a.$message({type:"info",message:"已取消解除"})})},selsChange:function(e){this.sels=e},batchRemove:function(){var e=this;this.sels.map(function(e){return e.id}).toString();this.$confirm("确认冻结选中记录吗？","提示",{type:"warning"}).then(function(){h.delete("/users/"+row.ids+"/").then(function(t){e.$notify.success({title:"成功",message:"冻结成功"}),e.GetAllData()}).catch(function(t){e.$notify.success({title:"失败",message:"冻结失败"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},mounted:function(){this.GetAllData()}}},F={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.report}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"举报原因"}},[a("span",[e._v(e._s(t.row.topic))])]),e._v(" "),a("el-form-item",{attrs:{label:"电话"}},[a("span",[e._v(e._s(t.row.phone))])]),e._v(" "),a("el-form-item",{attrs:{label:"邮箱"}},[a("span",[e._v(e._s(t.row.email))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"ID",prop:"id"}}),e._v(" "),a("el-table-column",{attrs:{label:"举报人姓名",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{prop:"handled",label:"处理状态",width:"150",filters:[{text:"已处理",value:"已处理"},{text:"未处理",value:"未处理"}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"未处理"===t.row.handled?"danger":"success","disable-transitions":""}},[e._v(e._s(t.row.handled))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("处理举报")])]}}])})],1),e._v(" "),a("div",{staticClass:"page",staticStyle:{position:"absolute",bottom:"40px",right:"20px"}},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var z=a("C7Lr")(O,F,!1,function(e){a("soJ+")},"data-v-7e0b8f00",null).exports,W=(a("Oo0O"),{data:function(){return{myChart:null,datas:[{name:"海门",value:9},{name:"鄂尔多斯",value:12},{name:"招远",value:12},{name:"舟山",value:12},{name:"齐齐哈尔",value:14},{name:"盐城",value:15},{name:"赤峰",value:16},{name:"青岛",value:18},{name:"乳山",value:18},{name:"金昌",value:19},{name:"泉州",value:21},{name:"莱西",value:21},{name:"日照",value:21},{name:"胶南",value:22},{name:"南通",value:23},{name:"拉萨",value:24},{name:"云浮",value:24},{name:"梅州",value:25},{name:"文登",value:25},{name:"上海",value:25},{name:"攀枝花",value:25},{name:"威海",value:25},{name:"承德",value:25},{name:"厦门",value:26},{name:"汕尾",value:26},{name:"潮州",value:26},{name:"丹东",value:27},{name:"太仓",value:27},{name:"曲靖",value:27},{name:"烟台",value:28},{name:"福州",value:29},{name:"瓦房店",value:30},{name:"即墨",value:30},{name:"抚顺",value:31},{name:"玉溪",value:31},{name:"张家口",value:31},{name:"阳泉",value:31},{name:"莱州",value:32},{name:"湖州",value:32},{name:"汕头",value:32},{name:"昆山",value:33},{name:"宁波",value:33},{name:"湛江",value:33},{name:"揭阳",value:34},{name:"荣成",value:34},{name:"连云港",value:35},{name:"葫芦岛",value:35},{name:"常熟",value:36},{name:"东莞",value:36},{name:"河源",value:36},{name:"淮安",value:36},{name:"泰州",value:36},{name:"南宁",value:37},{name:"营口",value:37},{name:"惠州",value:37},{name:"江阴",value:37},{name:"蓬莱",value:37},{name:"韶关",value:38},{name:"嘉峪关",value:38},{name:"广州",value:38},{name:"延安",value:38},{name:"太原",value:39},{name:"清远",value:39},{name:"中山",value:39},{name:"昆明",value:39},{name:"寿光",value:40},{name:"盘锦",value:40},{name:"长治",value:41},{name:"深圳",value:41},{name:"珠海",value:42},{name:"宿迁",value:43},{name:"咸阳",value:43},{name:"铜川",value:44},{name:"平度",value:44},{name:"佛山",value:44},{name:"海口",value:44},{name:"江门",value:45},{name:"章丘",value:45},{name:"肇庆",value:46},{name:"大连",value:47},{name:"临汾",value:47},{name:"吴江",value:47},{name:"石嘴山",value:49},{name:"沈阳",value:50},{name:"苏州",value:50},{name:"茂名",value:50},{name:"嘉兴",value:51},{name:"长春",value:51},{name:"胶州",value:52},{name:"银川",value:52},{name:"张家港",value:52},{name:"三门峡",value:53},{name:"锦州",value:54},{name:"南昌",value:54},{name:"柳州",value:54},{name:"三亚",value:54},{name:"自贡",value:56},{name:"吉林",value:56},{name:"阳江",value:57},{name:"泸州",value:57},{name:"西宁",value:57},{name:"宜宾",value:58},{name:"呼和浩特",value:58},{name:"成都",value:58},{name:"大同",value:58},{name:"镇江",value:59},{name:"桂林",value:59},{name:"张家界",value:59},{name:"宜兴",value:59},{name:"北海",value:60},{name:"西安",value:61},{name:"金坛",value:62},{name:"东营",value:62},{name:"牡丹江",value:63},{name:"遵义",value:63},{name:"绍兴",value:63},{name:"扬州",value:64},{name:"常州",value:64},{name:"潍坊",value:65},{name:"重庆",value:66},{name:"台州",value:67},{name:"南京",value:67},{name:"滨州",value:70},{name:"贵阳",value:71},{name:"无锡",value:71},{name:"本溪",value:71},{name:"克拉玛依",value:72},{name:"渭南",value:72},{name:"马鞍山",value:72},{name:"宝鸡",value:72},{name:"焦作",value:75},{name:"句容",value:75},{name:"北京",value:79},{name:"徐州",value:79},{name:"衡水",value:80},{name:"包头",value:80},{name:"绵阳",value:80},{name:"乌鲁木齐",value:84},{name:"枣庄",value:84},{name:"杭州",value:84},{name:"淄博",value:85},{name:"鞍山",value:86},{name:"溧阳",value:86},{name:"库尔勒",value:86},{name:"安阳",value:90},{name:"开封",value:90},{name:"济南",value:92},{name:"德阳",value:93},{name:"温州",value:95},{name:"九江",value:96},{name:"邯郸",value:98},{name:"临安",value:99},{name:"兰州",value:99},{name:"沧州",value:100},{name:"临沂",value:103},{name:"南充",value:104},{name:"天津",value:105},{name:"富阳",value:106},{name:"泰安",value:112},{name:"诸暨",value:112},{name:"郑州",value:113},{name:"哈尔滨",value:114},{name:"聊城",value:116},{name:"芜湖",value:117},{name:"唐山",value:119},{name:"平顶山",value:119},{name:"邢台",value:119},{name:"德州",value:120},{name:"济宁",value:120},{name:"荆州",value:127},{name:"宜昌",value:130},{name:"义乌",value:132},{name:"丽水",value:133},{name:"洛阳",value:134},{name:"秦皇岛",value:136},{name:"株洲",value:143},{name:"石家庄",value:147},{name:"莱芜",value:148},{name:"常德",value:152},{name:"保定",value:153},{name:"湘潭",value:154},{name:"金华",value:157},{name:"岳阳",value:169},{name:"长沙",value:175},{name:"衢州",value:177},{name:"廊坊",value:193},{name:"菏泽",value:194},{name:"合肥",value:229},{name:"武汉",value:273},{name:"大庆",value:279}],geoCoordMap:{"海门":[121.15,31.89],"鄂尔多斯":[109.781327,39.608266],"招远":[120.38,37.35],"舟山":[122.207216,29.985295],"齐齐哈尔":[123.97,47.33],"盐城":[120.13,33.38],"赤峰":[118.87,42.28],"青岛":[120.33,36.07],"乳山":[121.52,36.89],"金昌":[102.188043,38.520089],"泉州":[118.58,24.93],"莱西":[120.53,36.86],"日照":[119.46,35.42],"胶南":[119.97,35.88],"南通":[121.05,32.08],"拉萨":[91.11,29.97],"云浮":[112.02,22.93],"梅州":[116.1,24.55],"文登":[122.05,37.2],"上海":[121.48,31.22],"攀枝花":[101.718637,26.582347],"威海":[122.1,37.5],"承德":[117.93,40.97],"厦门":[118.1,24.46],"汕尾":[115.375279,22.786211],"潮州":[116.63,23.68],"丹东":[124.37,40.13],"太仓":[121.1,31.45],"曲靖":[103.79,25.51],"烟台":[121.39,37.52],"福州":[119.3,26.08],"瓦房店":[121.979603,39.627114],"即墨":[120.45,36.38],"抚顺":[123.97,41.97],"玉溪":[102.52,24.35],"张家口":[114.87,40.82],"阳泉":[113.57,37.85],"莱州":[119.942327,37.177017],"湖州":[120.1,30.86],"汕头":[116.69,23.39],"昆山":[120.95,31.39],"宁波":[121.56,29.86],"湛江":[110.359377,21.270708],"揭阳":[116.35,23.55],"荣成":[122.41,37.16],"连云港":[119.16,34.59],"葫芦岛":[120.836932,40.711052],"常熟":[120.74,31.64],"东莞":[113.75,23.04],"河源":[114.68,23.73],"淮安":[119.15,33.5],"泰州":[119.9,32.49],"南宁":[108.33,22.84],"营口":[122.18,40.65],"惠州":[114.4,23.09],"江阴":[120.26,31.91],"蓬莱":[120.75,37.8],"韶关":[113.62,24.84],"嘉峪关":[98.289152,39.77313],"广州":[113.23,23.16],"延安":[109.47,36.6],"太原":[112.53,37.87],"清远":[113.01,23.7],"中山":[113.38,22.52],"昆明":[102.73,25.04],"寿光":[118.73,36.86],"盘锦":[122.070714,41.119997],"长治":[113.08,36.18],"深圳":[114.07,22.62],"珠海":[113.52,22.3],"宿迁":[118.3,33.96],"咸阳":[108.72,34.36],"铜川":[109.11,35.09],"平度":[119.97,36.77],"佛山":[113.11,23.05],"海口":[110.35,20.02],"江门":[113.06,22.61],"章丘":[117.53,36.72],"肇庆":[112.44,23.05],"大连":[121.62,38.92],"临汾":[111.5,36.08],"吴江":[120.63,31.16],"石嘴山":[106.39,39.04],"沈阳":[123.38,41.8],"苏州":[120.62,31.32],"茂名":[110.88,21.68],"嘉兴":[120.76,30.77],"长春":[125.35,43.88],"胶州":[120.03336,36.264622],"银川":[106.27,38.47],"张家港":[120.555821,31.875428],"三门峡":[111.19,34.76],"锦州":[121.15,41.13],"南昌":[115.89,28.68],"柳州":[109.4,24.33],"三亚":[109.511909,18.252847],"自贡":[104.778442,29.33903],"吉林":[126.57,43.87],"阳江":[111.95,21.85],"泸州":[105.39,28.91],"西宁":[101.74,36.56],"宜宾":[104.56,29.77],"呼和浩特":[111.65,40.82],"成都":[104.06,30.67],"大同":[113.3,40.12],"镇江":[119.44,32.2],"桂林":[110.28,25.29],"张家界":[110.479191,29.117096],"宜兴":[119.82,31.36],"北海":[109.12,21.49],"西安":[108.95,34.27],"金坛":[119.56,31.74],"东营":[118.49,37.46],"牡丹江":[129.58,44.6],"遵义":[106.9,27.7],"绍兴":[120.58,30.01],"扬州":[119.42,32.39],"常州":[119.95,31.79],"潍坊":[119.1,36.62],"重庆":[106.54,29.59],"台州":[121.420757,28.656386],"南京":[118.78,32.04],"滨州":[118.03,37.36],"贵阳":[106.71,26.57],"无锡":[120.29,31.59],"本溪":[123.73,41.3],"克拉玛依":[84.77,45.59],"渭南":[109.5,34.52],"马鞍山":[118.48,31.56],"宝鸡":[107.15,34.38],"焦作":[113.21,35.24],"句容":[119.16,31.95],"北京":[116.46,39.92],"徐州":[117.2,34.26],"衡水":[115.72,37.72],"包头":[110,40.58],"绵阳":[104.73,31.48],"乌鲁木齐":[87.68,43.77],"枣庄":[117.57,34.86],"杭州":[120.19,30.26],"淄博":[118.05,36.78],"鞍山":[122.85,41.12],"溧阳":[119.48,31.43],"库尔勒":[86.06,41.68],"安阳":[114.35,36.1],"开封":[114.35,34.79],"济南":[117,36.65],"德阳":[104.37,31.13],"温州":[120.65,28.01],"九江":[115.97,29.71],"邯郸":[114.47,36.6],"临安":[119.72,30.23],"兰州":[103.73,36.03],"沧州":[116.83,38.33],"临沂":[118.35,35.05],"南充":[106.110698,30.837793],"天津":[117.2,39.13],"富阳":[119.95,30.07],"泰安":[117.13,36.18],"诸暨":[120.23,29.71],"郑州":[113.65,34.76],"哈尔滨":[126.63,45.75],"聊城":[115.97,36.45],"芜湖":[118.38,31.33],"唐山":[118.02,39.63],"平顶山":[113.29,33.75],"邢台":[114.48,37.05],"德州":[116.29,37.45],"济宁":[116.59,35.38],"荆州":[112.239741,30.335165],"宜昌":[111.3,30.7],"义乌":[120.06,29.32],"丽水":[119.92,28.45],"洛阳":[112.44,34.7],"秦皇岛":[119.57,39.95],"株洲":[113.16,27.83],"石家庄":[114.48,38.03],"莱芜":[117.67,36.19],"常德":[111.69,29.05],"保定":[115.48,38.85],"湘潭":[112.91,27.87],"金华":[119.64,29.12],"岳阳":[113.09,29.37],"长沙":[113,28.21],"衢州":[118.88,28.97],"廊坊":[116.7,39.53],"菏泽":[115.480656,35.23375],"合肥":[117.27,31.86],"武汉":[114.31,30.52],"大庆":[125.03,46.58]}}},methods:{chinaTu:function(){var e=this,t=this,a=function(e){for(var a=e,l=[],n=0;n<a.length;n++){var i=t.geoCoordMap[a[n].name];i&&l.push({name:a[n].name,value:i.concat(a[n].value)})}return console.log(l),l},l={backgroundColor:"#404a59",title:{text:"Air Protector监测城市空气质量",left:"center",textStyle:{color:"#fff"}},tooltip:{formatter:function(e){return console.log(e),"预警详情:"+e.data.value[2]},trigger:"item"},legend:{orient:"vertical",y:"top",x:"right",data:["AQI"],textStyle:{color:"#fff"}},geo:{map:"china",label:{emphasis:{show:!1}},roam:!0,itemStyle:{normal:{areaColor:"#323c48",borderColor:"#111"},emphasis:{areaColor:"#2a333d"}}},series:[{name:"AQI",type:"scatter",coordinateSystem:"geo",data:a(this.datas),symbolSize:function(e){return e[2]/10},label:{normal:{formatter:"{b}",position:"right",show:!1},emphasis:{show:!0}},itemStyle:{normal:{color:"#ddb926"}}},{name:"预警详情",type:"effectScatter",coordinateSystem:"geo",data:a(this.datas.sort(function(e,t){return t.value-e.value}).slice(0,3)),symbolSize:function(e){return e[2]/10},showEffectOn:"render",rippleEffect:{period:2.5,brushType:"fill",scale:2},hoverAnimation:!0,label:{normal:{formatter:"{b}",position:"right",show:!0}},itemStyle:{normal:{color:"#f4e925",shadowBlur:10,shadowColor:"#333"}},zlevel:1}]};this.myChart=L.a.init(document.getElementById("da")),this.myChart.setOption(l),window.addEventListener("resize",function(){e.myChart.resize()})}},beforeDestroy:function(){this.myChart&&(this.myChart.dispose(),this.myChart=null)},mounted:function(){var e=this;this.$nextTick(function(){e.chinaTu()})}}),G={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{ref:"MapMountNode",attrs:{id:"da"}})])},staticRenderFns:[]};var E=a("C7Lr")(W,G,!1,function(e){a("vkCr")},"data-v-01078ae6",null).exports,M={data:function(){return{grid:[],dialogFormVisible:!1,title:"新增网格",formLabelWidth:"100px",form:{name:"",location:"",leader:"",phone:""},rules:{name:[{required:!0,message:"请输入网格名称",trigger:"blur"},{min:1,max:30,message:"长度在 1 到 30个字符",trigger:"blur"}]},total:void 0,pageSize:5,currentPage:1,id:"",idDis:!1,listLoading:!1,sels:[],search:""}},watch:{search:function(){this.GetAllData(),console.log(this.search)}},created:function(){this.GetAllData()},methods:{handleCurrentChange:function(e){this.GetAllData()},GetAllData:function(){var e=this;h.get("/grids/Grid/",{params:{page_size:this.pageSize,page:this.currentPage,search:this.search}}).then(function(t){console.log(t),e.grid=t.data.data.results,e.total=t.data.data.count,console.log("表格数据:",e.grid)}).catch(function(t){e.$notify.error({title:"失败",message:"获取数据失败"})})},AddGrid:function(){this.title="新增网格",this.dialogFormVisible=!0,this.form={},this.idDis=!1},BtnOk:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if("新增网格"==t.title&&h.post("/grids/Grid/",t.form).then(function(e){console.log("如果成功:",e),t.GetAllData()}).catch(function(e){t.$notify.error({title:"失败",message:"新增失败"}),console.log(e)}),"编辑网格"==t.title)for(var a=0;a<t.grid.length;a++)t.id==t.grid[a].id&&(t.grid.splice(a,1,t.form),h.put("/grids/Grid/"+t.id+"/",t.form).then(function(e){console.log("如果成功:",e),t.GetAllData()}).catch(function(e){t.$notify.error({title:"失败",message:"编辑失败"}),console.log(e)}));t.dialogFormVisible=!1}else console.log("失败")})},EditorStudent:function(e){this.title="编辑网格",this.dialogFormVisible=!0,this.form=e,this.id=e.id,this.idDis=!0},handleDel:function(e,t){var a=this;this.$confirm("此操作将永久删除网格, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){h.delete("/grids/Grid/"+t.id+"/").then(function(e){a.$notify.success({title:"成功",message:"删除成功"}),a.GetAllData()}).catch(function(e){a.$notify.success({title:"失败",message:"冻结失败"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},selsChange:function(e){this.sels=e},batchRemove:function(){var e=this;this.sels.map(function(e){return e.id}).toString();this.$confirm("确认冻结选中记录吗？","提示",{type:"warning"}).then(function(){h.delete("/users/"+row.ids+"/").then(function(t){e.$notify.success({title:"成功",message:"冻结成功"}),e.GetAllData()}).catch(function(t){e.$notify.success({title:"失败",message:"冻结失败"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},mounted:function(){this.GetAllData()}}},T={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.AddGrid}},[e._v("新增网格")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.grid,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",type:"index",label:"id",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"网格名称",width:"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"location",label:"网格地址",width:"300",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"leader",label:"负责人",width:"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"telephone",label:"联系方式",width:"300",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.EditorStudent(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.handleDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"page",staticStyle:{position:"absolute",bottom:"40px",right:"20px"}},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"网格名称",prop:"name","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"网格地址",prop:"location","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.location,callback:function(t){e.$set(e.form,"location",t)},expression:"form.location"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人",prop:"leader","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.leader,callback:function(t){e.$set(e.form,"leader",e._n(t))},expression:"form.leader"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式",prop:"telephone","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.telephone,callback:function(t){e.$set(e.form,"telephone",t)},expression:"form.telephone"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.BtnOk("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var V=a("C7Lr")(M,T,!1,function(e){a("lqGF")},"data-v-4bd1e400",null).exports,H={data:function(){return{devices:[],dialogFormVisible:!1,title:"新增设备",formLabelWidth:"100px",form:{PM25:0,PM10:0,SO2:0,NO2:0,CO:0,O3:0,WindSpeed:0,Light:0,CO2:0,Temperature:0,Humidity:0,AirPressure:0,Frequency:0},rules:{},total:void 0,pageSize:5,currentPage:1,id:"",idDis:!1,listLoading:!1,search:"",update_status:""}},watch:{search:function(){this.GetAllData(),console.log(this.search)}},created:function(){this.GetAllData()},methods:{filterTag1:function(e,t){return t.update_status===e},handleCurrentChange:function(e){this.GetAllData()},GetAllData:function(){var e=this;h.get("/devices/configure",{params:{page_size:this.pageSize,page:this.currentPage,update_status:this.update_status,search:this.search}}).then(function(t){console.log(t),e.devices=t.data.data.results,e.total=t.data.data.count,e.devices=t.data.data.results.map(function(e){return e.update_status="1"==e.update_status?"已同步":"未同步",e}),console.log("表格数据:",e.devices)}).catch(function(t){e.$notify.error({title:"失败",message:"获取数据失败"})})},BtnOk:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if("编辑设备"==t.title)for(var a=0;a<t.devices.length;a++)t.id==t.devices[a].id&&(t.form.date=d(t.form.date),t.devices.splice(a,1,t.form),h.put("/devices/"+t.id+"/conf",t.form).then(function(e){console.log("如果成功:",e),t.GetAllData()}).catch(function(e){t.$notify.error({title:"失败",message:"编辑失败"}),console.log(e)}));t.dialogFormVisible=!1}else console.log("失败")})},EditorStudent:function(e){this.title="修改设备阈值",this.dialogFormVisible=!0,this.form=e,this.id=e.id,this.idDis=!0},mounted:function(){this.GetAllData()}}},q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.devices}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"PM2.5"}},[a("span",[e._v(e._s(t.row.PM25))])]),e._v(" "),a("el-form-item",{attrs:{label:"PM10"}},[a("span",[e._v(e._s(t.row.PM10))])]),e._v(" "),a("el-form-item",{attrs:{label:"SO2"}},[a("span",[e._v(e._s(t.row.SO2))])]),e._v(" "),a("el-form-item",{attrs:{label:"NO2"}},[a("span",[e._v(e._s(t.row.NO2))])]),e._v(" "),a("el-form-item",{attrs:{label:"CO"}},[a("span",[e._v(e._s(t.row.CO))])]),e._v(" "),a("el-form-item",{attrs:{label:"O3"}},[a("span",[e._v(e._s(t.row.O3))])]),e._v(" "),a("el-form-item",{attrs:{label:"风速"}},[a("span",[e._v(e._s(t.row.WindSpeed))])]),e._v(" "),a("el-form-item",{attrs:{label:"光强"}},[a("span",[e._v(e._s(t.row.Light))])]),e._v(" "),a("el-form-item",{attrs:{label:"温度"}},[a("span",[e._v(e._s(t.row.Temperature))])]),e._v(" "),a("el-form-item",{attrs:{label:"湿度"}},[a("span",[e._v(e._s(t.row.Humidity))])]),e._v(" "),a("el-form-item",{attrs:{label:"气压"}},[a("span",[e._v(e._s(t.row.AirPressure))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"ID",prop:"id"}}),e._v(" "),a("el-table-column",{attrs:{label:"设备ID",prop:"device_id"}}),e._v(" "),a("el-table-column",{attrs:{label:"采集频率",prop:"Frequency"}}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间",prop:"update_time"}}),e._v(" "),a("el-table-column",{attrs:{label:"设备同步时间",prop:"device_update_time"}}),e._v(" "),a("el-table-column",{attrs:{prop:"update_status",label:"设备同步状态",width:"150",filters:[{text:"已同步",value:"已同步"},{text:"未同步",value:"未同步"}],"filter-method":e.filterTag1,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"未同步"===t.row.update_status?"danger":"success","disable-transitions":""}},[e._v(e._s(t.row.update_status))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.EditorStudent(t.row)}}},[e._v("重新设定阈值")])]}}])})],1),e._v(" "),a("div",{staticClass:"page",staticStyle:{position:"absolute",bottom:"40px",right:"20px"}},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"PM2.5阈值",prop:"PM25","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.PM25,callback:function(t){e.$set(e.form,"PM25",t)},expression:"form.PM25"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"PM10报警阈值",prop:"PM10","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.PM10,callback:function(t){e.$set(e.form,"PM10",t)},expression:"form.PM10"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"SO2报警阈值",prop:"SO2","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.SO2,callback:function(t){e.$set(e.form,"SO2",t)},expression:"form.SO2"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"NO2报警阈值",prop:"NO2","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.NO2,callback:function(t){e.$set(e.form,"NO2",t)},expression:"form.NO2"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"CO报警阈值",prop:"CO","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.CO,callback:function(t){e.$set(e.form,"CO",t)},expression:"form.CO"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"O3报警阈值",prop:"O3","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.O3,callback:function(t){e.$set(e.form,"O3",t)},expression:"form.O3"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"风速报警阈值",prop:"WindSpeed","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.WindSpeed,callback:function(t){e.$set(e.form,"WindSpeed",t)},expression:"form.WindSpeed"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"光强报警阈值",prop:"Light","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.Light,callback:function(t){e.$set(e.form,"Light",t)},expression:"form.Light"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"CO2报警阈值",prop:"CO2","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.CO2,callback:function(t){e.$set(e.form,"CO2",t)},expression:"form.CO2"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"温度报警阈值",prop:"Temperature","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.Temperature,callback:function(t){e.$set(e.form,"Temperature",t)},expression:"form.Temperature"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"湿度报警阈值",prop:"Humidity","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.Humidity,callback:function(t){e.$set(e.form,"Humidity",t)},expression:"form.Humidity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"气压报警阈值",prop:"AirPressure","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.AirPressure,callback:function(t){e.$set(e.form,"AirPressure",t)},expression:"form.AirPressure"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"采集频率",prop:"Frequency","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.Frequency,callback:function(t){e.$set(e.form,"Frequency",t)},expression:"form.Frequency"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.BtnOk("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var R=a("C7Lr")(H,q,!1,function(e){a("uyly")},"data-v-51e17960",null).exports,B={data:function(){return{devices:[],total:void 0,pageSize:5,currentPage:1,id:"",listLoading:!1,search:""}},watch:{search:function(){this.GetAllData(),console.log(this.search)}},created:function(){this.GetAllData()},methods:{formatSex:function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},handleCurrentChange:function(e){this.GetAllData()},GetAllData:function(){var e=this;h.get("/devices/historydata",{params:{page_size:this.pageSize,page:this.currentPage,search:this.search}}).then(function(t){console.log(t),e.devices=t.data.data.results,e.total=t.data.data.count,console.log("表格数据:",e.devices)}).catch(function(t){e.$notify.error({title:"失败",message:"获取数据失败"})})},mounted:function(){this.GetAllData()}}},I={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.devices,"highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"id",type:"index",label:"id",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"device",label:"设备号","min-width":"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"PM25",label:"PM2.5","min-width":"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"PM10",label:"PM10","min-width":"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"SO2",label:"SO2","min-width":"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"NO2",label:"NO2","min-width":"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"CO",label:"CO","min-width":"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"O3",label:"O3","min-width":"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"WindSpeed",label:"风速","min-width":"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"WindDirection",label:"风向","min-width":"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"Light",label:"光强","min-width":"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"CO2",label:"CO2","min-width":"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"Temperature",label:"温度","min-width":"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"Humidity",label:"湿度","min-width":"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"AirPressure",label:"气压","min-width":"120",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"时间","min-width":"120",formatter:e.formatSex,sortable:""}})],1),e._v(" "),a("div",{staticClass:"page",staticStyle:{position:"absolute",bottom:"40px",right:"20px"}},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var N=a("C7Lr")(B,I,!1,function(e){a("4afw")},"data-v-05cd5ebb",null).exports,j={data:function(){return{users:[],total:void 0,pageSize:7,currentPage:1,id:"",idDis:"",listLoading:!1,sels:[],search:"",status:""}},watch:{search:function(){this.GetAllData(),console.log(this.search)}},created:function(){this.GetAllData()},methods:{filterTag:function(e,t){return t.status===e},handleCurrentChange:function(e){this.GetAllData()},GetAllData:function(){var e=this;h.get("/devices/alarmdata",{params:{page_size:this.pageSize,page:this.currentPage,status:this.status,search:this.search}}).then(function(t){console.log(t),e.users=t.data.data.results,e.total=t.data.data.count,e.users=t.data.data.results.map(function(e){return e.status="1"==e.status?"已处理":"未处理",e}),console.log("表格数据:",e.users)}).catch(function(t){e.$notify.error({title:"失败",message:"获取数据失败"})})},handleDel:function(e,t){var a=this;this.$confirm("此操作将解除告警, 请确保是否已经解决?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){h.delete("/devices/"+t.id+"/alarmhandle").then(function(e){a.$notify.success({title:"成功",message:"解除成功"}),a.GetAllData()}).catch(function(e){a.$notify.success({title:"失败",message:"解除失败"})})}).catch(function(){a.$message({type:"info",message:"已取消解除"})})},selsChange:function(e){this.sels=e},batchRemove:function(){var e=this;this.sels.map(function(e){return e.id}).toString();this.$confirm("确认冻结选中记录吗？","提示",{type:"warning"}).then(function(){h.delete("/users/"+row.ids+"/").then(function(t){e.$notify.success({title:"成功",message:"冻结成功"}),e.GetAllData()}).catch(function(t){e.$notify.success({title:"失败",message:"冻结失败"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},mounted:function(){this.GetAllData()}}},U={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.users,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"id",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"device",label:"设备序列号",width:"250",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"alarmtype",label:"报警类型",width:"250",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"value",label:"报警值",width:"180",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"处理状态",width:"150",filters:[{text:"已处理",value:"已处理"},{text:"未处理",value:"未处理"}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"未处理"===t.row.status?"danger":"success","disable-transitions":""}},[e._v(e._s(t.row.status))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.handleDel(t.$index,t.row)}}},[e._v("解除告警")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"dealwith_time",label:"处理时间","min-width":"150",sortable:""}})],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:e.batchRemove}},[e._v("批量删除")])],1),e._v(" "),a("div",{staticClass:"page",staticStyle:{position:"absolute",bottom:"40px",right:"20px"}},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var Y=a("C7Lr")(j,U,!1,function(e){a("3vgS")},"data-v-1a696510",null).exports,J={data:function(){return{users:[],total:void 0,pageSize:7,currentPage:1,id:"",idDis:"",listLoading:!1,sels:[],search:""}},watch:{search:function(){this.GetAllData(),console.log(this.search)}},created:function(){this.GetAllData()},methods:{filterTag:function(e,t){return t.status===e},handleCurrentChange:function(e){this.GetAllData()},GetAllData:function(){var e=this;h.get("/logs/logs/",{params:{page_size:this.pageSize,page:this.currentPage,search:this.search}}).then(function(t){console.log(t),e.users=t.data.data.results,e.total=t.data.data.count,console.log("表格数据:",e.users)}).catch(function(t){e.$notify.error({title:"失败",message:"获取数据失败"})})},mounted:function(){this.GetAllData()}}},X={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.users,"highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"log_id",label:"id",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"log_content",label:"操作内容",width:"250",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"log_type",label:"操作类型",width:"150",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"log_user",label:"操作人",width:"200",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"log_ip",label:"操作IP",width:"250",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"log_dotype",label:"操作方法",width:"150",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"log_addtime",label:"操作时间",width:"250",sortable:""}})],1),e._v(" "),a("div",{staticClass:"page",staticStyle:{position:"absolute",bottom:"40px",right:"20px"}},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var Q=a("C7Lr")(J,X,!1,function(e){a("cW6O")},"data-v-3d52bc48",null).exports,K=a("3cXf"),Z=a.n(K),ee={data:function(){return{username:"",password:"",token:void 0,user:{}}},methods:{AllAuth:function(){this.$router.push("/home/first")},handleClick:function(){h.defaults.headers.common.Authorization="JWT "+this.token,localStorage.setItem("token",Z()(this.token)),localStorage.setItem("user",Z()(this.user))},setCookie:function(e,t,a){document.cookie="Token="+this.token},Login:function(){var e=this;this.username||alert("用户名不能为空"),this.password||alert("密码不能为空"),this.username&&this.password&&h.post("/login",{username:this.username,password:this.password}).then(function(t){console.log(t),e.token=t.data.data.access,e.user=t.data.data.username,e.handleClick(),e.is_super=t.data.data.is_superuser,localStorage.setItem("is_super",e.is_super),e.AllAuth()}).catch(function(t){e.$notify.error({title:"错误",message:"用户名或密码错误"})})},ExitSystem:function(){localStorage.removeItem("token"),localStorage.removeItem("user"),this.$router.push("/")}}},te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-page"},[a("div",{staticClass:"container"},[a("div",{staticClass:"form-holder has-shadow"},[a("div",{staticClass:"form d-flex align-items-center"},[e._m(0),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"form-group"},[a("el-input",{attrs:{placeholder:"用户名"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),e._v(" "),a("div",{staticClass:"form-group"},[a("el-input",{attrs:{placeholder:"请输入密码","show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.Login(t)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),a("button",{staticClass:"btn btn-primary",staticStyle:{cursor:"pointer"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"pervent",void 0,t.key,void 0)?null:e.Login(t)}}},[e._v("登录")])])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"external",staticStyle:{"margin-bottom":"10px",display:"flex","align-content":"flex-end"}},[t("span",{staticStyle:{"margin-left":"10px","margin-top":"45px","font-size":"25px",height:"40px","font-weight":"500"}},[this._v("Air Protector 智慧云平台登录")])])}]};var ae=a("C7Lr")(ee,te,!1,function(e){a("/ZCT")},"data-v-c94be45a",null).exports;l.default.use(r.a);var le=new r.a({routes:[{path:"/login1",name:"login1",component:ae},{path:"/Home",redirect:"/Home/first",name:"Home",component:m,children:[{path:"/home/UserManager",name:"UserManager",component:b},{path:"/home/device",name:"device",component:S},{path:"/home/first",name:"first",component:P},{path:"/home/report",name:"report",component:z},{path:"/home/detect",name:"detect",component:E},{path:"/home/Index",name:"Index",component:x},{path:"/home/grid",name:"grid",component:V},{path:"/home/devicerelate",name:"devicerelate",component:R},{path:"/home/realdate",name:"realdate",component:N},{path:"/home/alarm",name:"alarm",component:Y},{path:"/home/log",name:"log",component:Q}]}]});l.default.use(o.a),l.default.config.productionTip=!1,new l.default({el:"#app",router:le,components:{App:n.default},template:"<App/>"})},Vmam:function(e,t,a){e.exports=a.p+"static/img/timg.93e2468.jpg"},WKqE:function(e,t,a){e.exports=a.p+"static/img/timg2.ec280cb.jpg"},cW6O:function(e,t){},ftlU:function(e,t){},gFLX:function(e,t){},lqGF:function(e,t){},oYUS:function(e,t,a){"use strict";var l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};t.a=l},sEFh:function(e,t){},"soJ+":function(e,t){},uyly:function(e,t){},vkCr:function(e,t){},yqdz:function(e,t,a){e.exports=a.p+"static/img/timg3.5f8065d.jpg"},"z/YE":function(e,t){}},["NHnr"]);